# Clippy configuration for HyperSpot
avoid-breaking-exported-api = false

check-inconsistent-struct-field-initializers = true

lint-commented-code = true

#
# Workspace-level lints are configured in Cargo.toml [workspace.lints.clippy]:
#
# The rules below enforce secure ORM usage and help prevent accidental
# bypasses of the secure ORM layer by disallowing direct execution of
# SeaORM queries without scoping.

# Disallow direct execution methods that bypass secure wrappers
disallowed-methods = [
    # Select operations - must use SecureSelect
    { path = "sea_orm::Select::all", reason = "Use SecureSelect::all() after .secure().scope_with()" },
    { path = "sea_orm::Select::one", reason = "Use SecureSelect::one() after .secure().scope_with()" },
    { path = "sea_orm::Select::count", reason = "Use SecureSelect::count() after .secure().scope_with()", allow-invalid = true },

    # Update operations - must use SecureUpdateMany
    { path = "sea_orm::UpdateMany::exec", reason = "Use SecureUpdateMany::exec() after .secure().scope_with()" },

    # Delete operations - must use SecureDeleteMany
    { path = "sea_orm::DeleteMany::exec", reason = "Use SecureDeleteMany::exec() after .secure().scope_with()" },
]

# Note: To enable these checks in a crate, add to the crate root:
# #![deny(clippy::disallowed_methods)]
#
# Or enable warnings instead:
# #![warn(clippy::disallowed_methods)]

# Type complexity threshold (default is 250)
type-complexity-threshold = 190
# Type complexity threshold (default is 25)
cognitive-complexity-threshold = 25

allow-expect-in-tests = true
allow-unwrap-in-tests = true

