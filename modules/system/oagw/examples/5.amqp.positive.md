# AMQP publish (positive)

## Upstream Configuration

```json
{
  "alias": "<amqp-upstream-host>",
  "server": {
    "endpoints": [
      { "scheme": "amqp", "host": "<amqp-upstream-host>", "port": 5672 }
    ]
  },
  "protocol": "gts.x.core.oagw.protocol.v1~x.core.amqp.v1",
  "auth": {
    "type": "gts.x.core.oagw.plugin.auth.v1~x.core.oagw.apikey.v1",
    "config": {
      "header": "x-api-key",
      "secret_ref": "cred://amqp/api-key"
    }
  }
}
```

## Route Configuration

```json
{
  "upstream_id": "gts.x.core.oagw.upstream.v1~<upstream-uuid>",
  "match": {
    "amqp": {
      "exchange": "events",
      "routing_key": "user.created"
    }
  }
}
```

## Inbound Publish Request

The proxy surface for AMQP publish is implementation-defined. The positive assertions are:

- Route selection uses `exchange` + `routing_key`.
- Auth secrets are resolved from `cred_store`.
- Message is published to upstream broker.

## Expected result

- Publish succeeds (ack or success response, depending on AMQP mode).
- No secret material is logged.
